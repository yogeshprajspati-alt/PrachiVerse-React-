<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#8B5CF6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Happy New Year 2025</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #EC4899;
            --accent: #FCD34D;
            --dark: #1E1B4B;
            --bg-gradient: linear-gradient(135deg, #8B5CF6, #EC4899, #1E1B4B, #8B5CF6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            color: white;
            overflow-x: hidden;
            scroll-behavior: smooth;
            min-height: 100vh;
            min-height: 100dvh; /* Dynamic viewport height for mobile */
            touch-action: manipulation; /* Better touch handling */
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9;
        }

        #stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        #hero {
            position: relative;
            overflow: hidden;
        }

        .hero-bg-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .sparkle {
            position: absolute;
            font-size: 2rem;
            animation: sparkleFloat 4s ease-in-out infinite;
            opacity: 0.8;
        }

        .sparkle-1 { top: 20%; left: 10%; animation-delay: 0s; }
        .sparkle-2 { top: 30%; right: 15%; animation-delay: 1s; }
        .sparkle-3 { top: 60%; left: 20%; animation-delay: 2s; }
        .sparkle-4 { top: 40%; right: 10%; animation-delay: 3s; }
        .sparkle-5 { top: 70%; left: 80%; animation-delay: 4s; }

        .butterfly {
            position: absolute;
            font-size: 1.5rem;
            animation: butterflyFlutter 6s ease-in-out infinite;
            opacity: 0.7;
            color: var(--secondary);
        }

        .butterfly-1 { top: 25%; left: 15%; animation-delay: 0s; }
        .butterfly-2 { top: 45%; right: 20%; animation-delay: 2s; }
        .butterfly-3 { top: 65%; left: 25%; animation-delay: 4s; }

        @keyframes butterflyFlutter {
            0%, 100% { transform: translateY(0) translateX(0) rotate(0deg) scale(1); }
            25% { transform: translateY(-15px) translateX(10px) rotate(5deg) scale(1.1); }
            50% { transform: translateY(-30px) translateX(-5px) rotate(-5deg) scale(0.9); }
            75% { transform: translateY(-15px) translateX(5px) rotate(3deg) scale(1.05); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.1);
            max-width: 600px;
            margin: 20px;
            position: relative;
            overflow: hidden;
            animation: gentlePulse 4s ease-in-out infinite;
        }

        @keyframes gentlePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.1); }
            50% { transform: scale(1.02); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 25px rgba(255, 255, 255, 0.15); }
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3rem, 10vw, 6rem);
            margin-bottom: 20px;
            text-shadow: 
                0 0 30px var(--primary),
                0 0 60px var(--secondary),
                0 0 90px var(--accent),
                0 0 120px rgba(255, 255, 255, 0.5);
            animation: glow 4s ease-in-out infinite alternate, titleEntrance 2s ease-out;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes titleEntrance {
            0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(5deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        @keyframes glow {
            from { text-shadow: 0 0 30px var(--primary); }
            to { text-shadow: 0 0 50px var(--secondary), 0 0 70px var(--accent); }
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.8rem, 5vw, 3rem);
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px 30px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
            display: inline-block;
        }

        h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 15px;
            padding: 12px 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
            display: inline-block;
        }

        p {
            font-size: clamp(1rem, 4vw, 1.4rem);
            line-height: 1.6;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px 20px;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
        }

        #subtitle {
            font-size: clamp(1.5rem, 5vw, 2rem);
            opacity: 0;
            animation: fadeInUp 2s 1.5s forwards, textGlow 3s 2s infinite alternate;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 10px 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            display: inline-block;
            color: #FCD34D;
            text-shadow: 0 0 10px #FCD34D, 0 0 20px #F59E0B;
        }

        @keyframes fadeInUp {
            0% { transform: translateY(50px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes textGlow {
            from { text-shadow: 0 0 10px rgba(252, 211, 77, 0.5); }
            to { text-shadow: 0 0 20px #FCD34D, 0 0 30px #F59E0B, 0 0 40px #D97706; }
        }

        #start-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 18px 40px;
            font-size: 1.3rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            animation: pulse 2s infinite, btnGlow 3s infinite alternate;
            margin-top: 40px;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
            position: relative;
            overflow: hidden;
        }

        #start-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        #start-btn:hover::before {
            left: 100%;
        }

        #start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.8), 0 0 60px rgba(236, 72, 153, 0.6);
        }

        @keyframes btnGlow {
            from { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
            to { box-shadow: 0 0 30px rgba(236, 72, 153, 0.8), 0 0 50px rgba(252, 211, 77, 0.6); }
        }

        .carousel {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 20px;
            max-width: 100%;
            padding: 20px;
        }

        .card {
            flex: 0 0 80%;
            scroll-snap-align: start;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            backface-visibility: hidden;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        #countdown {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: bold;
            text-shadow: 0 0 20px var(--accent);
        }

        .digit {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        #music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            z-index: 100;
        }

        #cursor-trail {
            position: fixed;
            pointer-events: none;
            z-index: 5;
        }

        .trail {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            animation: fadeOut 1s forwards;
        }

        @keyframes fadeOut {
            to { opacity: 0; transform: scale(0); }
        }

        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            animation: shoot 3s linear infinite;
        }

        @keyframes shoot {
            0% { transform: translateX(-100vw) translateY(-100vh); opacity: 1; }
            100% { transform: translateX(100vw) translateY(100vh); opacity: 0; }
        }

        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--accent);
            white-space: nowrap;
            animation: typing 3s steps(20, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--accent); }
        }

        .floating-flowers {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .flower {
            position: absolute;
            color: var(--secondary);
            font-size: 2rem;
            animation: float 6s linear infinite, flowerBloom 3s ease-in-out infinite;
            opacity: 0.7;
        }

        @keyframes flowerBloom {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            section {
                padding: 15px;
                min-height: 90vh;
            }

            .glass-card {
                padding: 20px;
                margin: 10px;
                border-radius: 15px;
            }

            h1 {
                font-size: clamp(2.5rem, 8vw, 4rem);
                margin-bottom: 15px;
            }

            h2 {
                font-size: clamp(1.5rem, 4vw, 2.5rem);
                padding: 15px 20px;
                margin-bottom: 15px;
            }

            h3 {
                font-size: 1.2rem;
                padding: 10px 15px;
            }

            p {
                font-size: clamp(0.9rem, 3vw, 1.2rem);
                padding: 12px 15px;
                margin-bottom: 10px;
            }

            #subtitle {
                font-size: clamp(1.2rem, 4vw, 1.8rem);
                padding: 8px 15px;
                letter-spacing: 1px;
            }

            #start-btn {
                padding: 15px 30px;
                font-size: 1.1rem;
                margin-top: 25px;
            }

            .card {
                flex: 0 0 90%;
                margin: 10px;
            }

            #countdown {
                font-size: clamp(1.5rem, 5vw, 3rem);
            }

            .digit {
                padding: 8px 15px;
                margin: 0 3px;
            }

            #music-toggle {
                bottom: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }

            .sparkle, .butterfly {
                font-size: 1.2rem;
            }

            .flower {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            section {
                padding: 10px;
                min-height: 85vh;
            }

            .glass-card {
                padding: 15px;
                margin: 5px;
            }

            h1 {
                font-size: clamp(2rem, 7vw, 3.5rem);
            }

            h2 {
                font-size: clamp(1.3rem, 5vw, 2rem);
                padding: 12px 15px;
            }

            p {
                font-size: clamp(0.85rem, 3.5vw, 1.1rem);
                padding: 10px 12px;
            }

            #subtitle {
                font-size: clamp(1rem, 4vw, 1.5rem);
                padding: 6px 12px;
            }

            #start-btn {
                padding: 12px 25px;
                font-size: 1rem;
            }

            .card {
                flex: 0 0 95%;
            }

            #countdown {
                font-size: clamp(1.2rem, 4vw, 2.5rem);
            }

            .digit {
                padding: 6px 12px;
                margin: 0 2px;
            }
        }

        @media (min-width: 1200px) {
            .glass-card {
                max-width: 700px;
            }

            h1 {
                font-size: clamp(4rem, 8vw, 7rem);
            }

            h2 {
                font-size: clamp(2.5rem, 4vw, 4rem);
                padding: 25px 40px;
            }

            p {
                font-size: clamp(1.2rem, 2vw, 1.6rem);
                padding: 18px 25px;
            }
        }

        /* Ensure proper viewport handling */
        @media screen and (orientation: portrait) {
            body {
                min-height: 100vh;
                min-height: 100dvh;
            }

            section {
                min-height: 100vh;
                min-height: 100dvh;
            }
        }

        /* Loading optimization for first appearance */
        body {
            font-display: swap;
        }

        /* Prevent horizontal scroll */
        html, body {
            overflow-x: hidden;
            width: 100%;
        }

        /* Optimize for 1080x2400 screens */
        @media (max-width: 1080px) and (max-height: 2400px) {
            section {
                padding: 20px 15px;
            }

            .glass-card {
                padding: 25px 20px;
            }

            h1 {
                font-size: clamp(3rem, 9vw, 5rem);
            }

            h2 {
                font-size: clamp(1.8rem, 5vw, 3rem);
            }

            p {
                font-size: clamp(1rem, 4vw, 1.4rem);
            }
        }

        /* First appearance optimizations */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            color: white;
            overflow-x: hidden;
            scroll-behavior: smooth;
            min-height: 100vh;
            min-height: 100dvh; /* Dynamic viewport height for mobile */
            touch-action: manipulation; /* Better touch handling */
            /* Prevent flash of unstyled content */
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        /* Loading state */
        body.loading {
            opacity: 0;
        }

        /* Ensure smooth font loading */
        @font-face {
            font-family: 'Poppins';
            font-display: swap;
        }

        /* Optimize canvas rendering */
        canvas {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        /* Better text rendering */
        h1, h2, h3, p {
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .signature {
            margin-top: 20px;
            font-style: italic;
            color: var(--secondary);
            text-align: center;
            font-size: 1.1rem;
            animation: signatureGlow 3s ease-in-out infinite alternate;
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 15px;
            padding: 15px 25px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
            display: inline-block;
        }

        @keyframes signatureGlow {
            from { text-shadow: 0 0 10px rgba(236, 72, 153, 0.5); }
            to { text-shadow: 0 0 20px rgba(236, 72, 153, 0.8), 0 0 30px rgba(139, 92, 246, 0.6); }
        }
    </style>
</head>
<body class="loading">
    <div id="particles-js"></div>
    <canvas id="fireworks-canvas"></canvas>
    <canvas id="confetti-canvas"></canvas>
    <div id="stars"></div>
    <div id="cursor-trail"></div>

    <section id="hero">
        <div class="hero-bg-elements">
            <div class="sparkle sparkle-1">‚ú®</div>
            <div class="sparkle sparkle-2">‚≠ê</div>
            <div class="sparkle sparkle-3">üí´</div>
            <div class="sparkle sparkle-4">üåü</div>
            <div class="sparkle sparkle-5">‚ú®</div>
            <div class="butterfly butterfly-1">ü¶ã</div>
            <div class="butterfly butterfly-2">ü¶ã</div>
            <div class="butterfly butterfly-3">ü¶ã</div>
        </div>
        <div class="hero-content">
            <h1 class="typewriter">Happy New Year 2025</h1>
            <p id="subtitle">My love, our new beginning awaits</p>
            <button id="start-btn">Touch to Begin Our Journey</button>
        </div>
    </section>

    <section id="message">
        <div class="floating-flowers"></div>
        <div class="glass-card">
            <h2>My Dearest Love</h2>
            <p>Every moment with you feels like the first time our eyes met. Your smile still gives me butterflies, and your touch still sets my heart racing.</p>
            <p>As we step into 2025 together, I promise to love you more deeply, cherish you more tenderly, and make every day feel like our very first date.</p>
            <p>You are my everything, my always, my forever. Happy New Year, my love. üíï</p>
        </div>
    </section>

    <section id="memories">
        <h2>Our Cherished Memories</h2>
        <div class="carousel">
            <div class="card" onclick="flipCard(this)">
                <div class="card-front">
                    <h3>Our First Kiss</h3>
                    <p>That magical moment when time stood still</p>
                </div>
                <div class="card-back">
                    <p>The way your lips met mine, soft and perfect. My heart still races thinking about that first tender touch. You took my breath away. üíã</p>
                </div>
            </div>
            <div class="card" onclick="flipCard(this)">
                <div class="card-front">
                    <h3>Starry Night Walks</h3>
                    <p>Hand in hand under the moonlight</p>
                </div>
                <div class="card-back">
                    <p>Walking with you, feeling your warmth, listening to your dreams. Those quiet moments when words weren't needed - just our hearts speaking. üåô</p>
                </div>
            </div>
            <div class="card" onclick="flipCard(this)">
                <div class="card-front">
                    <h3>Your Beautiful Smile</h3>
                    <p>The light that brightens my darkest days</p>
                </div>
                <div class="card-back">
                    <p>Your smile lights up my world like the sun breaking through clouds. It's the first thing I think of when I wake up and the last before I sleep. üòä</p>
                </div>
            </div>
            <div class="card" onclick="flipCard(this)">
                <div class="card-front">
                    <h3>Our Future Dreams</h3>
                    <p>Building our life together, one dream at a time</p>
                </div>
                <div class="card-back">
                    <p>Every plan, every hope, every dream - I want to experience it all with you. You make the future look so beautiful. ‚ú®</p>
                </div>
            </div>
        </div>
    </section>

    <section id="wishes">
        <h2>My Heartfelt Wishes for You</h2>
        <div class="glass-card" onclick="animateWish(this)">
            <p>May this new year fill your days with the warmth of my love, the joy of our shared laughter, and the peace of knowing you're cherished beyond words.</p>
        </div>
        <div class="glass-card" onclick="animateWish(this)">
            <p>I wish for you dreams that come true, adventures that excite you, and a love that grows stronger with every heartbeat. You deserve nothing less than magic.</p>
        </div>
        <div class="glass-card" onclick="animateWish(this)">
            <p>May our love story continue to be the most beautiful chapter of your life, filled with tender moments, passionate kisses, and endless happiness.</p>
        </div>
        <div class="glass-card" onclick="animateWish(this)">
            <p>Here's to you, my love - the one who makes my world complete. May 2025 bring you everything your beautiful heart desires.</p>
        </div>
    </section>

    <section id="countdown-section">
        <h2>Countdown to Midnight</h2>
        <div id="countdown">00:00:00:00</div>
    </section>

    <section id="fireworks-section">
        <h2>Tap Anywhere for Fireworks!</h2>
        <p>Click or tap to create magical fireworks</p>
    </section>

    <section id="final">
        <div class="glass-card">
            <h2>Forever Yours</h2>
            <p>My love, as the clock strikes midnight and 2025 begins, remember that my heart beats only for you. Every star in the sky, every wave in the ocean, every breath I take - all exist to remind me of my love for you.</p>
            <p>You are my sunrise and sunset, my dreams and reality, my past, present, and future. Happy New Year, my everything. I love you more than words can express.</p>
            <p class="signature">With all my love,<br>Your [Her Name]'s Biggest Fan ‚ù§Ô∏è</p>
        </div>
    </section>

    <button id="music-toggle">üîä</button>
    <audio id="bg-music" loop preload="auto" volume="0.3">
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" type="audio/wav">
        <!-- Alternative romantic audio: https://www.bensound.com/royalty-free-music/track/romantic -->
    </audio>

    <script>
        // Handle loading state for better first appearance
        document.addEventListener('DOMContentLoaded', function() {
            document.body.classList.remove('loading');
            
            // Ensure canvases are properly sized
            const fireworksCanvas = document.getElementById('fireworks-canvas');
            const confettiCanvas = document.getElementById('confetti-canvas');
            
            function resizeCanvases() {
                const dpr = window.devicePixelRatio || 1;
                const rect = fireworksCanvas.getBoundingClientRect();
                
                fireworksCanvas.width = rect.width * dpr;
                fireworksCanvas.height = rect.height * dpr;
                confettiCanvas.width = rect.width * dpr;
                confettiCanvas.height = rect.height * dpr;
                
                const ctx = fireworksCanvas.getContext('2d');
                const ctx2 = confettiCanvas.getContext('2d');
                ctx.scale(dpr, dpr);
                ctx2.scale(dpr, dpr);
            }
            
            resizeCanvases();
            window.addEventListener('resize', resizeCanvases);
        });

        // Particles.js configuration
        particlesJS('particles-js', {
            particles: {
                number: { value: 100, density: { enable: true, value_area: 800 } },
                color: { value: ['#8B5CF6', '#EC4899', '#FCD34D', '#FFFFFF'] },
                shape: { 
                    type: ['circle', 'image'],
                    image: {
                        src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDMTMuMSAyIDE0IDIuOSAxNCA0QzE0IDUuMSAxMy4xIDYgMTIgNkMxMC45IDYgMTAgNS4xIDEwIDRDMTAgMi45IDEwLjkgMiAxMiAyWk0xMiAxNkMxMy4xIDE2IDE0IDE0LjEgMTQgMTJDMTQgOS45IDEzLjEgOSA5IDlDOS44OSA5IDkgOS45IDkgMTJDOSA5LjkgOS44OSA5IDkgOUM5IDYuMSAxMC45IDUgMTIgNVoiIGZpbGw9IiNFQzQ4OTkiLz4KPC9zdmc+',
                        width: 24,
                        height: 24
                    }
                },
                opacity: { value: 0.6, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1 } },
                size: { value: 4, random: true, anim: { enable: true, speed: 2, size_min: 0.1 } },
                line_linked: { enable: false },
                move: { enable: true, speed: 1.5, direction: 'none', random: true, straight: false, out_mode: 'out', bounce: false }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: true, mode: 'bubble' }, onclick: { enable: true, mode: 'push' } },
                modes: { bubble: { distance: 200, size: 6, duration: 2, opacity: 1, speed: 3 }, push: { particles_nb: 4 } }
            },
            retina_detect: true
        });

        // Twinkling stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }
        createStars();

        // Shooting stars
        function createShootingStar() {
            const star = document.createElement('div');
            star.className = 'shooting-star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDuration = (Math.random() * 2 + 2) + 's';
            document.body.appendChild(star);
            setTimeout(() => star.remove(), 4000);
        }
        setInterval(createShootingStar, 5000);

        // Cursor trail
        let trailElements = [];
        document.addEventListener('mousemove', (e) => {
            const trail = document.createElement('div');
            trail.className = 'trail';
            trail.style.left = e.clientX - 5 + 'px';
            trail.style.top = e.clientY - 5 + 'px';
            document.getElementById('cursor-trail').appendChild(trail);
            trailElements.push(trail);
            if (trailElements.length > 20) {
                trailElements.shift().remove();
            }
        });

        // Touch trail for mobile
        document.addEventListener('touchmove', (e) => {
            const touch = e.touches[0];
            const trail = document.createElement('div');
            trail.className = 'trail';
            trail.style.left = touch.clientX - 5 + 'px';
            trail.style.top = touch.clientY - 5 + 'px';
            document.getElementById('cursor-trail').appendChild(trail);
            trailElements.push(trail);
            if (trailElements.length > 20) {
                trailElements.shift().remove();
            }
        });

        // Flip card function
        function flipCard(card) {
            card.classList.toggle('flipped');
        }

        // Animate wish
        function animateWish(card) {
            gsap.to(card, { scale: 1.1, duration: 0.3, yoyo: true, repeat: 1 });
        }

        // Countdown timer
        function updateCountdown() {
            const now = new Date();
            const newYear = new Date('2026-01-01T00:00:00');
            const diff = newYear - now;

            if (diff <= 0) {
                document.getElementById('countdown').innerHTML = '00:00:00:00';
                triggerMassiveFireworks();
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('countdown').innerHTML = 
                `<span class="digit">${days.toString().padStart(2, '0')}</span>:<span class="digit">${hours.toString().padStart(2, '0')}</span>:<span class="digit">${minutes.toString().padStart(2, '0')}</span>:<span class="digit">${seconds.toString().padStart(2, '0')}</span>`;
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Advanced Fireworks with Canvas
        const fireworksCanvas = document.getElementById('fireworks-canvas');
        const fireworksCtx = fireworksCanvas.getContext('2d');
        fireworksCanvas.width = window.innerWidth;
        fireworksCanvas.height = window.innerHeight;

        const confettiCanvas = document.getElementById('confetti-canvas');
        const confettiCtx = confettiCanvas.getContext('2d');
        confettiCanvas.width = window.innerWidth;
        confettiCanvas.height = window.innerHeight;

        class Particle {
            constructor(x, y, vx, vy, color, life, size = 2) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.color = color;
                this.life = life;
                this.maxLife = life;
                this.size = size;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.1; // gravity
                this.life--;
                this.size *= 0.99;
            }

            draw(ctx) {
                const alpha = this.life / this.maxLife;
                ctx.globalAlpha = alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        const particles = [];
        const confetti = [];

        function createFirework(x, y) {
            const colors = ['#8B5CF6', '#EC4899', '#FCD34D', '#FFFFFF', '#FF6B6B', '#4ECDC4', '#45B7D1'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const particleCount = 50 + Math.random() * 50;

            for (let i = 0; i < particleCount; i++) {
                const angle = (Math.PI * 2 * i) / particleCount;
                const speed = 2 + Math.random() * 4;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                const life = 60 + Math.random() * 60;
                particles.push(new Particle(x, y, vx, vy, color, life));
            }
        }

        function createConfetti() {
            const colors = ['#8B5CF6', '#EC4899', '#FCD34D', '#FF6B6B', '#4ECDC4'];
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * window.innerWidth;
                const y = -10;
                const vx = (Math.random() - 0.5) * 4;
                const vy = Math.random() * 3 + 1;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const life = 300 + Math.random() * 200;
                confetti.push(new Particle(x, y, vx, vy, color, life, 3 + Math.random() * 3));
            }
        }

        function animateParticles() {
            requestAnimationFrame(animateParticles);

            fireworksCtx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
            confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

            // Update and draw fireworks particles
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].draw(fireworksCtx);
                if (particles[i].life <= 0) {
                    particles.splice(i, 1);
                }
            }

            // Update and draw confetti
            for (let i = confetti.length - 1; i >= 0; i--) {
                confetti[i].update();
                confetti[i].draw(confettiCtx);
                if (confetti[i].life <= 0 || confetti[i].y > window.innerHeight + 10) {
                    confetti.splice(i, 1);
                }
            }
        }
        animateParticles();

        // Tap to create fireworks
        document.addEventListener('click', (e) => {
            createFirework(e.clientX, e.clientY);
            if (Math.random() < 0.3) createConfetti(); // 30% chance for confetti
        });
        document.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            createFirework(touch.clientX, touch.clientY);
            if (Math.random() < 0.3) createConfetti();
        });

        function triggerMassiveFireworks() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    createFirework(Math.random() * window.innerWidth, Math.random() * window.innerHeight);
                }, i * 200);
            }
            createConfetti();
        }

        // Music toggle
        const music = document.getElementById('bg-music');
        const toggle = document.getElementById('music-toggle');
        let isPlaying = localStorage.getItem('musicPlaying') === 'true';
        if (isPlaying) {
            music.play();
            toggle.textContent = 'üîá';
        }
        toggle.addEventListener('click', () => {
            if (isPlaying) {
                music.pause();
                toggle.textContent = 'üîä';
            } else {
                music.play();
                toggle.textContent = 'üîá';
            }
            isPlaying = !isPlaying;
            localStorage.setItem('musicPlaying', isPlaying);
        });

        // Scroll animations and parallax
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const rate = scrolled * -0.5;
            document.body.style.backgroundPosition = `0% ${rate}px`;
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    gsap.from(entry.target, { opacity: 0, y: 50, duration: 1.5, ease: 'power2.out' });
                }
            });
        }, { threshold: 0.3 });
        document.querySelectorAll('section > *').forEach(el => observer.observe(el));

        // Enhanced romantic floating elements
        function createFloatingElements() {
            const romanticElements = ['üêº', 'üíñ', 'üéà', '‚ú®', 'üíù', 'üåπ', 'üå∏', 'üå∫'];
            const container = document.body;

            setInterval(() => {
                if (Math.random() < 0.3) { // 30% chance to create romantic element
                    const element = document.createElement('div');
                    element.className = 'romantic-float';
                    element.textContent = romanticElements[Math.floor(Math.random() * romanticElements.length)];
                    element.style.left = Math.random() * 100 + '%';
                    element.style.animationDuration = (8 + Math.random() * 8) + 's';
                    element.style.fontSize = (1.5 + Math.random() * 2) + 'rem';
                    container.appendChild(element);
                    setTimeout(() => element.remove(), 16000);
                }
            }, 2000);
        }

        // CSS for romantic floating elements (added to style)
        const romanticStyle = document.createElement('style');
        romanticStyle.textContent = `
            .romantic-float {
                position: fixed;
                top: 100vh;
                z-index: 1;
                pointer-events: none;
                animation: romanticRise linear infinite;
                opacity: 0.6;
            }
            @keyframes romanticRise {
                0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                10% { opacity: 0.6; }
                90% { opacity: 0.6; }
                100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
            }
        `;
        document.head.appendChild(romanticStyle);

        // Opening animation with romantic initial effects
        gsap.from('#hero h1', { opacity: 0, scale: 0.5, duration: 2, ease: 'back.out(1.7)' });
        gsap.from('#subtitle', { opacity: 0, y: 50, duration: 1.5, delay: 1.5 });
        gsap.from('#start-btn', { opacity: 0, y: 50, duration: 1, delay: 2.5 });

        // Gentle romantic landing effects
        setTimeout(() => {
            // Soft confetti
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = -10;
                    const confettiPiece = new Particle(x, y, (Math.random() - 0.5) * 2, Math.random() * 2 + 0.5, ['#8B5CF6', '#EC4899', '#FCD34D'][Math.floor(Math.random() * 3)], 200, 2);
                    confetti.push(confettiPiece);
                }, i * 50);
            }

            // Gentle fireworks
            setTimeout(() => {
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => createFirework(Math.random() * window.innerWidth * 0.8 + window.innerWidth * 0.1, Math.random() * window.innerHeight * 0.6 + window.innerHeight * 0.2), i * 500);
                }
            }, 500);
        }, 1500);

        createFloatingElements();

        // Floating flowers in message section
        function createFloatingFlowers() {
            const flowersContainer = document.querySelector('.floating-flowers');
            if (!flowersContainer) return;
            setInterval(() => {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.textContent = ['üå∏', 'üåπ', 'üå∫', 'üå∑', 'üåº'][Math.floor(Math.random() * 5)];
                flower.style.left = Math.random() * 100 + '%';
                flower.style.animationDuration = (4 + Math.random() * 4) + 's';
                flower.style.fontSize = (1 + Math.random()) + 'rem';
                flowersContainer.appendChild(flower);
                setTimeout(() => flower.remove(), 6000);
            }, 1000);
        }
        createFloatingFlowers();
        window.addEventListener('resize', () => {
            const dpr = window.devicePixelRatio || 1;
            const rect = fireworksCanvas.getBoundingClientRect();
            
            fireworksCanvas.width = rect.width * dpr;
            fireworksCanvas.height = rect.height * dpr;
            confettiCanvas.width = rect.width * dpr;
            confettiCanvas.height = rect.height * dpr;
            
            const ctx = fireworksCanvas.getContext('2d');
            const ctx2 = confettiCanvas.getContext('2d');
            ctx.scale(dpr, dpr);
            ctx2.scale(dpr, dpr);
        });
    </script>
</body>
</html>